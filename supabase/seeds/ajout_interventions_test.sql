-- ========================================
-- AJOUT D'INTERVENTIONS POUR TESTS (Version 2.0)
-- ========================================
-- Ce script ajoute des interventions de test pour :
-- - 10 interventions sans gestionnaire (status DEMANDE) pour l'onglet Market
-- - 20 interventions pour Badr avec différents statuts
-- 
-- IMPORTANT : Ce script est un ajout, il ne remplace pas les données existantes
-- Version 2.0 : Adapté à la nouvelle structure de la table interventions
--               (avec tenant_id et owner_id au lieu de client_id)
-- ========================================

-- 10 interventions sans gestionnaire (status DEMANDE) pour l'onglet Market
INSERT INTO public.interventions (
  id, id_inter, agence_id, tenant_id, owner_id, assigned_user_id, statut_id, metier_id,
  date, date_termine, date_prevue, due_date,
  contexte_intervention, consigne_intervention, consigne_second_artisan, commentaire_agent,
  adresse, code_postal, ville, latitude, longitude,
  is_active, created_at, updated_at
) VALUES
  -- Interventions Market (sans gestionnaire, status DEMANDE)
  (uuid_generate_v4(), 'INT-MARKET-001', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-001'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-001'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-16 09:00:00+01', NULL, '2025-01-16 10:00:00+01', '2025-01-21 17:00:00+01',
   'Fuite d''eau sous l''évier de la cuisine.', 
   'Remplacer le joint défectueux et vérifier les raccordements.', 
   'Assistance pour démontage si nécessaire.', 
   'Urgent, client disponible matin uniquement.',
   '25 Avenue des Champs-Élysées', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-002', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-002'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-002'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-17 14:00:00+01', NULL, '2025-01-17 15:00:00+01', '2025-01-22 18:00:00+01',
   'Problème d''éclairage dans le salon, plusieurs prises ne fonctionnent plus.', 
   'Diagnostiquer le problème électrique et réparer les prises défectueuses.', 
   'Vérification générale de l''installation électrique.', 
   'Client préfère intervention en après-midi.',
   '15 Rue de la Paix', '69001', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-003', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-003'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-003'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-01-18 10:00:00+01', NULL, '2025-01-18 11:00:00+01', '2025-01-23 17:00:00+01',
   'Chaudière qui fait du bruit anormal, chauffage moins efficace.', 
   'Contrôler la chaudière et nettoyer si nécessaire.', 
   'Vérifier la pression et les raccordements.', 
   'Intervention prévue pour la matinée.',
   '8 Boulevard Saint-Germain', '75005', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-004', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-004'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-004'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-01-19 16:00:00+01', NULL, '2025-01-19 17:00:00+01', '2025-01-24 18:00:00+01',
   'Fissure dans la vitre du balcon, besoin de remplacement.', 
   'Remplacer la vitre fissurée par une vitre sécurisée.', 
   'Vérifier l''état du cadre.', 
   'Urgent, risque de chute.',
   '42 Rue du Faubourg Saint-Antoine', '75011', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-005', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-005'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-005'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'BRICOLAGE'),
   '2025-01-20 08:00:00+01', NULL, '2025-01-20 09:00:00+01', '2025-01-25 17:00:00+01',
   'Étagères à fixer dans le bureau, travaux de menuiserie.', 
   'Fixer les étagères selon le plan fourni par le client.', 
   'Peinture des étagères si nécessaire.', 
   'Client disponible très tôt le matin.',
   '67 Avenue Jean Jaurès', '69007', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-006', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-006'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-006'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'VOLET-STORE'),
   '2025-01-21 13:00:00+01', NULL, '2025-01-21 14:00:00+01', '2025-01-26 18:00:00+01',
   'Volet roulant bloqué, ne remonte plus correctement.', 
   'Débloquer le volet et vérifier le mécanisme.', 
   'Nettoyage et graissage si nécessaire.', 
   'Client préfère après-midi.',
   '23 Place Bellecour', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-007', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-007'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-007'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-22 11:00:00+01', NULL, '2025-01-22 12:00:00+01', '2025-01-27 17:00:00+01',
   'Robinet de cuisine qui goutte, gaspillage d''eau.', 
   'Remplacer le joint du robinet et ajuster la pression.', 
   'Vérifier l''étanchéité générale.', 
   'Intervention rapide souhaitée.',
   '89 Rue de Rivoli', '75001', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-008', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-008'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-008'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-23 15:00:00+01', NULL, '2025-01-23 16:00:00+01', '2025-01-28 18:00:00+01',
   'Interrupteur défaillant dans la chambre principale.', 
   'Remplacer l''interrupteur et vérifier le câblage.', 
   'Test de tous les interrupteurs de la chambre.', 
   'Client disponible fin d''après-midi.',
   '156 Boulevard Haussmann', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-009', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-009'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-009'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-01-24 09:00:00+01', NULL, '2025-01-24 10:00:00+01', '2025-01-29 17:00:00+01',
   'Radiateur qui ne chauffe plus dans la salle de bain.', 
   'Diagnostiquer le problème et réparer le radiateur.', 
   'Vérifier la pression du circuit.', 
   'Urgent, pas de chauffage.',
   '78 Rue de la République', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-MARKET-010', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-010'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-010'),
   NULL, 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-01-25 12:00:00+01', NULL, '2025-01-25 13:00:00+01', '2025-01-30 18:00:00+01',
   'Double vitrage défaillant, condensation entre les vitres.', 
   'Remplacer le double vitrage par un modèle performant.', 
   'Vérifier l''étanchéité du cadre.', 
   'Amélioration thermique souhaitée.',
   '34 Avenue Montaigne', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW());

-- 20 interventions pour Badr avec différents statuts
INSERT INTO public.interventions (
  id, id_inter, agence_id, tenant_id, owner_id, assigned_user_id, statut_id, metier_id,
  date, date_termine, date_prevue, due_date,
  contexte_intervention, consigne_intervention, consigne_second_artisan, commentaire_agent,
  adresse, code_postal, ville, latitude, longitude,
  is_active, created_at, updated_at
) VALUES
  -- Interventions Badr - Status ACCEPTE
  (uuid_generate_v4(), 'INT-BADR-001', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-001'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-001'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'ACCEPTE'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-15 09:00:00+01', NULL, '2025-01-20 10:00:00+01', '2025-01-25 17:00:00+01',
   'Réparation complète de la plomberie de la salle de bain.', 
   'Remplacer tous les joints et raccordements défectueux.', 
   'Nettoyage complet après travaux.', 
   'Client satisfait, travaux acceptés.',
   '12 Rue de Rivoli', '75001', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-002', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-002'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-002'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'ACCEPTE'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-16 14:00:00+01', NULL, '2025-01-21 15:00:00+01', '2025-01-26 18:00:00+01',
   'Installation électrique complète pour nouvelle cuisine.', 
   'Installer tous les points lumineux et prises selon plan.', 
   'Mise en conformité électrique.', 
   'Devis accepté, travaux programmés.',
   '25 Avenue des Champs-Élysées', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-003', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-003'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-003'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'ACCEPTE'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-01-17 10:00:00+01', NULL, '2025-01-22 11:00:00+01', '2025-01-27 17:00:00+01',
   'Remplacement de la chaudière par un modèle plus performant.', 
   'Installation complète avec mise en conformité.', 
   'Test de fonctionnement et formation client.', 
   'Investissement important, bien accepté.',
   '8 Boulevard Saint-Germain', '75005', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-004', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-004'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-004'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'ACCEPTE'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-01-18 16:00:00+01', NULL, '2025-01-23 17:00:00+01', '2025-01-28 18:00:00+01',
   'Rénovation complète des fenêtres avec double vitrage.', 
   'Remplacement de toutes les fenêtres par des modèles thermiques.', 
   'Isolation renforcée des cadres.', 
   'Amélioration énergétique acceptée.',
   '42 Rue du Faubourg Saint-Antoine', '75011', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-005', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-005'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-005'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'ACCEPTE'), 
   (SELECT id FROM public.metiers WHERE code = 'BRICOLAGE'),
   '2025-01-19 08:00:00+01', NULL, '2025-01-24 09:00:00+01', '2025-01-29 17:00:00+01',
   'Aménagement complet du bureau avec rangements sur mesure.', 
   'Création d''étagères et placards selon plan client.', 
   'Peinture et finitions.', 
   'Projet d''aménagement accepté.',
   '67 Avenue Jean Jaurès', '69007', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  -- Interventions Badr - Status VISITE_TECHNIQUE
  (uuid_generate_v4(), 'INT-BADR-006', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-006'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-006'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'VISITE_TECHNIQUE'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-20 13:00:00+01', NULL, '2025-01-25 14:00:00+01', '2025-01-30 18:00:00+01',
   'Visite technique pour diagnostic complet de la plomberie.', 
   'Évaluation complète de l''état de l''installation.', 
   'Préparation devis détaillé.', 
   'Visite programmée pour diagnostic.',
   '23 Place Bellecour', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-007', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-007'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-007'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'VISITE_TECHNIQUE'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-21 11:00:00+01', NULL, '2025-01-26 12:00:00+01', '2025-01-31 17:00:00+01',
   'Visite technique pour rénovation électrique complète.', 
   'Audit complet de l''installation électrique.', 
   'Préparation devis avec options.', 
   'Client souhaite moderniser l''électricité.',
   '89 Rue de Rivoli', '75001', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-008', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-008'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-008'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'VISITE_TECHNIQUE'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-01-22 15:00:00+01', NULL, '2025-01-27 16:00:00+01', '2025-02-01 18:00:00+01',
   'Visite technique pour remplacement système de chauffage.', 
   'Évaluation des besoins thermiques du logement.', 
   'Proposition de solutions énergétiques.', 
   'Optimisation énergétique souhaitée.',
   '156 Boulevard Haussmann', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-009', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-009'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-009'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'VISITE_TECHNIQUE'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-01-23 09:00:00+01', NULL, '2025-01-28 10:00:00+01', '2025-02-02 17:00:00+01',
   'Visite technique pour rénovation fenêtres et isolation.', 
   'Évaluation thermique et acoustique des ouvertures.', 
   'Proposition de solutions d''isolation.', 
   'Amélioration confort thermique.',
   '78 Rue de la République', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-010', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-010'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-010'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'VISITE_TECHNIQUE'), 
   (SELECT id FROM public.metiers WHERE code = 'BRICOLAGE'),
   '2025-01-24 12:00:00+01', NULL, '2025-01-29 13:00:00+01', '2025-02-03 18:00:00+01',
   'Visite technique pour aménagement sur mesure.', 
   'Prise de mesures et étude des contraintes.', 
   'Préparation devis détaillé avec 3D.', 
   'Projet d''aménagement complexe.',
   '34 Avenue Montaigne', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  -- Interventions Badr - Status DEMANDE
  (uuid_generate_v4(), 'INT-BADR-011', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-011'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-011'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-25 09:00:00+01', NULL, '2025-01-30 10:00:00+01', '2025-02-04 17:00:00+01',
   'Nouvelle demande de réparation plomberie cuisine.', 
   'Réparer la fuite sous l''évier de la cuisine.', 
   'Vérification générale de la plomberie.', 
   'Demande récente, en attente de traitement.',
   '45 Rue de la Paix', '75002', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-012', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-012'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-012'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-26 14:00:00+01', NULL, '2025-01-31 15:00:00+01', '2025-02-05 18:00:00+01',
   'Demande d''installation électrique pour nouveau bureau.', 
   'Installer prises et éclairage pour espace de travail.', 
   'Mise aux normes électriques.', 
   'Nouveau projet, en cours d''évaluation.',
   '67 Rue de Rivoli', '75004', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-013', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-013'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-013'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-01-27 10:00:00+01', NULL, '2025-02-01 11:00:00+01', '2025-02-06 17:00:00+01',
   'Demande de réparation chauffage, radiateurs froids.', 
   'Diagnostiquer et réparer le système de chauffage.', 
   'Nettoyage et entretien préventif.', 
   'Problème de chauffage urgent.',
   '123 Avenue des Champs-Élysées', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-014', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-014'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-014'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-01-28 16:00:00+01', NULL, '2025-02-02 17:00:00+01', '2025-02-07 18:00:00+01',
   'Demande de remplacement vitre brisée par tempête.', 
   'Remplacer la vitre cassée par une vitre sécurisée.', 
   'Vérification de l''étanchéité.', 
   'Urgent, ouverture exposée aux intempéries.',
   '89 Boulevard Saint-Germain', '75006', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-015', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-015'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-015'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'DEMANDE'), 
   (SELECT id FROM public.metiers WHERE code = 'BRICOLAGE'),
   '2025-01-29 08:00:00+01', NULL, '2025-02-03 09:00:00+01', '2025-02-08 17:00:00+01',
   'Demande de réparation meuble de cuisine.', 
   'Réparer les charnières et ajuster les portes.', 
   'Nettoyage et finitions.', 
   'Réparation rapide souhaitée.',
   '234 Rue du Faubourg Saint-Antoine', '75012', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  -- Interventions Badr - Status INTER_EN_COURS
  (uuid_generate_v4(), 'INT-BADR-016', 
   (SELECT id FROM public.agencies WHERE code = 'OQORO'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-016'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-016'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'INTER_EN_COURS'), 
   (SELECT id FROM public.metiers WHERE code = 'PLOMBERIE'),
   '2025-01-30 13:00:00+01', NULL, '2025-02-04 14:00:00+01', '2025-02-09 18:00:00+01',
   'Rénovation plomberie en cours, travaux avancés.', 
   'Remplacement des canalisations principales.', 
   'Test de pression et étanchéité.', 
   'Travaux en cours, progression normale.',
   '345 Place Bellecour', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-017', 
   (SELECT id FROM public.agencies WHERE code = 'IMODIRECT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-017'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-017'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'INTER_EN_COURS'), 
   (SELECT id FROM public.metiers WHERE code = 'ELECTRICITE'),
   '2025-01-31 11:00:00+01', NULL, '2025-02-05 12:00:00+01', '2025-02-10 17:00:00+01',
   'Installation électrique en cours, câblage terminé.', 
   'Installation des prises et interrupteurs.', 
   'Test de fonctionnement et mise en service.', 
   'Phase finale des travaux électriques.',
   '456 Avenue Jean Jaurès', '69007', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-018', 
   (SELECT id FROM public.agencies WHERE code = 'AFEDIM'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-018'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-018'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'INTER_EN_COURS'), 
   (SELECT id FROM public.metiers WHERE code = 'CHAUFFAGE'),
   '2025-02-01 15:00:00+01', NULL, '2025-02-06 16:00:00+01', '2025-02-11 18:00:00+01',
   'Remplacement chaudière en cours, installation en phase finale.', 
   'Mise en service et réglage de la nouvelle chaudière.', 
   'Formation client et livraison documentation.', 
   'Travaux presque terminés.',
   '567 Rue de la République', '69002', 'LYON', 45.764043, 4.835659,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-019', 
   (SELECT id FROM public.agencies WHERE code = 'FLATLOOKER'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-019'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-019'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'INTER_EN_COURS'), 
   (SELECT id FROM public.metiers WHERE code = 'VITRERIE'),
   '2025-02-02 09:00:00+01', NULL, '2025-02-07 10:00:00+01', '2025-02-12 17:00:00+01',
   'Remplacement fenêtres en cours, 3 sur 5 terminées.', 
   'Installation des dernières fenêtres et finitions.', 
   'Test d''étanchéité et réglage.', 
   'Progression normale, fin prévue cette semaine.',
   '678 Avenue Montaigne', '75008', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW()),

  (uuid_generate_v4(), 'INT-BADR-020', 
   (SELECT id FROM public.agencies WHERE code = 'HOMEPILOT'), 
   (SELECT id FROM public.tenants WHERE external_ref = 'TEN-2025-020'), 
   (SELECT id FROM public.owner WHERE external_ref = 'OWN-2025-020'),
   (SELECT id FROM public.users WHERE username = 'badr'), 
   (SELECT id FROM public.intervention_statuses WHERE code = 'INTER_EN_COURS'), 
   (SELECT id FROM public.metiers WHERE code = 'BRICOLAGE'),
   '2025-02-03 12:00:00+01', NULL, '2025-02-08 13:00:00+01', '2025-02-13 18:00:00+01',
   'Aménagement bureau en cours, structure terminée.', 
   'Installation des étagères et rangements.', 
   'Peinture et finitions finales.', 
   'Travaux bien avancés, livraison prévue bientôt.',
   '789 Rue de Rivoli', '75001', 'PARIS', 48.856614, 2.352221,
   true, NOW(), NOW());

-- ========================================
-- FIN DU SCRIPT D'AJOUT
-- ========================================
-- Total ajouté :
-- - 10 interventions Market (sans gestionnaire, status DEMANDE)
-- - 20 interventions Badr (5 ACCEPTE + 5 VISITE_TECHNIQUE + 5 DEMANDE + 5 INTER_EN_COURS)
-- = 30 nouvelles interventions
-- ========================================
--
-- NOTE : Ce script nécessite que les tenants (TEN-2025-xxx) et
--        owners (OWN-2025-xxx) existent déjà dans la base de données.
--        Si ce n'est pas le cas, vous devez d'abord créer ces entités.
-- ========================================
